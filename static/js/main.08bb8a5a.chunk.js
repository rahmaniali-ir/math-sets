(this["webpackJsonpmath-sets"]=this["webpackJsonpmath-sets"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(8),o=n.n(r),i=(n(13),n(3)),s=n(4),l=n(2),u=n(0),j={collections:[{elements:["a","b","c"],name:"A"},{elements:["1","2","3","4"],name:"B"}],relations:[{name:"R",source:"A",target:"B",nodes:[]}]},d=function(e,t){return e.collections.findIndex((function(e){return e.name===t}))},m=function(e,t){return e.relations.findIndex((function(e){return e.name===t}))},O=function(e,t){switch(t.type){case"ADD_COLLECTION":var n=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=e.collections.map((function(e){return e.name}));if(n.length===t.length)return"";for(;;){var a=t[Math.floor(Math.random()*t.length)];if(!n.includes(a))return a}}(e);if(!n)return e;var a={name:n,elements:[]};return Object(l.a)(Object(l.a)({},e),{},{collections:[].concat(Object(s.a)(e.collections),[a])});case"ADD_TO_COLLECTION":var c=d(e,t.payload.collection),r=t.payload.input.split(",").map((function(e){return e.trim()})).filter((function(e){return e})),o=[].concat(Object(s.a)(e.collections[c].elements),Object(s.a)(r)),u=Array.from(new Set(o)),j=e.collections.map((function(e,t){return t===c&&(e.elements=u),e}));return Object(l.a)(Object(l.a)({},e),{},{collections:j});case"RENAME_COLLECTION":var O=t.payload.name.toUpperCase();if(function(e,t){return e.collections.some((function(e){return e.name===t}))}(e,O))return e;var b=d(e,t.payload.name),f=e.collections.map((function(e,t){return t===b?{name:O,elements:e.elements}:e}));return Object(l.a)(Object(l.a)({},e),{},{collections:f});case"REMOVE_COLLECTION":var h=d(e,t.payload.name);return Object(l.a)(Object(l.a)({},e),{},{collections:e.collections.filter((function(e,t){return t!==h}))});case"REMOVE_FROM_COLLECTION":var v=d(e,t.payload.name),x=e.collections.map((function(e,n){return n===v?Object(l.a)(Object(l.a)({},e),{},{elements:e.elements.filter((function(e){return e!==t.payload.element}))}):e})),p=e.relations.map((function(e){return e.source===t.payload.name&&(e.nodes=e.nodes.filter((function(e){return e[0]!==t.payload.element}))),e.target===t.payload.name&&(e.nodes=e.nodes.filter((function(e){return e[1]!==t.payload.element}))),e}));return Object(l.a)(Object(l.a)({},e),{},{collections:x,relations:p});case"ADD_RELATION":var g=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=e.relations.map((function(e){return e.name}));if(n.length===t.length)return"";for(;;){var a=t[Math.floor(Math.random()*t.length)];if(!n.includes(a))return a}}(e);return Object(l.a)(Object(l.a)({},e),{},{relations:[].concat(Object(s.a)(e.relations),[{name:g,source:"",target:"",nodes:[]}])});case"UPDATE_RELATION_SOURCE":var C=m(e,t.payload.name);if(e.relations[C].source===t.payload.source)return e;var E=e.relations.map((function(e,n){return n===C?Object(l.a)(Object(l.a)({},e),{},{source:t.payload.source,nodes:[]}):e}));return Object(l.a)(Object(l.a)({},e),{},{relations:E});case"UPDATE_RELATION_TARGET":var N=m(e,t.payload.name);if(e.relations[N].target===t.payload.target)return e;var y=e.relations.map((function(e,n){return n===N?Object(l.a)(Object(l.a)({},e),{},{target:t.payload.target,nodes:[]}):e}));return Object(l.a)(Object(l.a)({},e),{},{relations:y});case"TOGGLE_RELATION_NODE":var M=m(e,t.payload.name),T=e.relations[M],L=Object(i.a)(t.payload.node,2),k=L[0],A=L[1],_=T.nodes.some((function(e){return e[0]===k&&e[1]===A}));return T.nodes=_?T.nodes.filter((function(e){return!(e[0]===k&&e[1]===A)})):[].concat(Object(s.a)(T.nodes),[[k,A]]),Object(l.a)({},e);default:return e}},b=Object(a.createContext)({state:j,dispatch:function(){}}),f=function(){return Object(a.useContext)(b)},h=function(e){var t=e.children,n=Object(a.useReducer)(O,j),c=Object(i.a)(n,2),r=c[0],o=c[1];return Object(u.jsx)(b.Provider,{value:{state:r,dispatch:o},children:t})},v=(n(15),function(e){var t=e.collection,n=f().dispatch,c=Object(a.useRef)(null);Object(a.useEffect)((function(){c.current.value=t.name}),[t.name]);var r=Object(a.useCallback)((function(e){"Enter"===e.key&&n({type:"RENAME_COLLECTION",payload:{collection:t.name,name:e.target.value}})}),[n,t.name]),o=Object(a.useCallback)((function(e){"Enter"===e.key&&(n({type:"ADD_TO_COLLECTION",payload:{collection:t.name,input:e.target.value}}),e.target.value="")}),[n,t.name]),i=Object(a.useCallback)((function(){n({type:"REMOVE_COLLECTION",payload:{name:t.name}})}),[n,t.name]),s=Object(a.useCallback)((function(e){n({type:"REMOVE_FROM_COLLECTION",payload:{name:t.name,element:e}})}),[n,t.name]);return Object(u.jsxs)("div",{className:"box set",children:[Object(u.jsx)("header",{children:Object(u.jsx)("input",{type:"text",maxLength:1,defaultValue:t.name,onKeyUp:r,ref:c})}),Object(u.jsx)("main",{children:t.elements.map((function(e,t){return Object(u.jsx)("div",{className:"element",onClick:function(){return s(e)},children:Object(u.jsx)("span",{children:e})},t)}))}),Object(u.jsx)("div",{className:"add",children:Object(u.jsx)("input",{type:"text",onKeyUp:o})}),Object(u.jsx)("div",{className:"delete",children:Object(u.jsx)("button",{onClick:i,children:"Del"})}),Object(u.jsx)("footer",{children:t.elements.length})]})}),x=(n(16),function(){var e=f(),t=e.state,n=e.dispatch,c=Object(a.useCallback)((function(){n({type:"ADD_COLLECTION"})}),[n]);return Object(u.jsxs)("div",{className:"collections",children:[t.collections.map((function(e,t){return Object(u.jsx)(v,{collection:e},t)})),Object(u.jsx)("button",{className:"add",onClick:c,children:"Add Set"})]})}),p=(n(17),{symmetry:'<svg viewBox="0 0 384 384"><path d="M234.667 0H192c0 106.027-85.973 192-192 192v42.667C129.6 234.667 234.667 129.6 234.667 0z"/><path d="M149.333 0h-42.667C106.667 58.88 58.88 106.667 0 106.667v42.667C82.453 149.333 149.333 82.453 149.333 0zM64 0H0v64c35.307 0 64-28.693 64-64zM234.667 384h42.667c0-58.88 47.787-106.667 106.667-106.667v-42.667c-82.454.001-149.334 66.881-149.334 149.334z"/><path d="M149.333 384H192c0-106.027 85.973-192 192-192v-42.667C254.4 149.333 149.333 254.4 149.333 384zM320 384h64v-64c-35.307 0-64 28.693-64 64z"/></svg>',grid:'<svg viewBox="0 0 408 408"><path d="M0 102h102V0H0v102zm153 306h102V306H153v102zM0 408h102V306H0v102zm0-153h102V153H0v102zm153 0h102V153H153v102zM306 0v102h102V0H306zM153 102h102V0H153v102zm153 153h102V153H306v102zm0 153h102V306H306v102z"/></svg>',plus:'<svg viewBox="0 0 357 357"><path d="M357 204H204v153h-51V204H0v-51h153V0h51v153h153v51z"/></svg>',heart:'<svg viewBox="0 0 391.837 391.837"><path d="M285.257 35.528c58.743.286 106.294 47.836 106.58 106.58 0 107.624-195.918 214.204-195.918 214.204S0 248.165 0 142.108c0-58.862 47.717-106.58 106.58-106.58a105.534 105.534 0 0189.339 48.065 106.578 106.578 0 0189.338-48.065z" /></svg>'}),g=function(e){var t=e.name,n=Object(a.useMemo)((function(){return{__html:p[t]}}),[t]);return Object(u.jsx)("div",{className:"icon",dangerouslySetInnerHTML:n})},C=(n(18),function(e){var t=e.icon,n=e.text,a=e.className;return Object(u.jsxs)("div",{className:"chips ".concat(a),title:n,children:[Object(u.jsx)(g,{name:t}),n&&Object(u.jsx)("main",{children:n})]})}),E=(n(19),function(e){var t=e.name,n=e.domain,c=e.range,r=e.relation,o=e.changed,s=Object(a.useState)({domain:null,range:null}),j=Object(i.a)(s,2),d=j[0],m=j[1],O=Object(a.useCallback)((function(e,t){m({domain:e,range:t})}),[m]),b=Object(a.useCallback)((function(){m({domain:null,range:null})}),[m]),f=Object(a.useCallback)((function(e,t){o&&(o(e,t),m((function(e){return Object(l.a)({},e)})))}),[o,m]),h=Object(a.useCallback)((function(e,t){return r.nodes.some((function(n){var a=Object(i.a)(n,2),c=a[0],r=a[1];return e===c&&t===r}))}),[r]),v=Object(u.jsxs)("main",{children:[Object(u.jsxs)("div",{className:"domain",children:[Object(u.jsx)("div",{}),n.map((function(e,t){return Object(u.jsx)("div",{className:d.domain===e?"hovered":"",children:e},t)}))]}),Object(u.jsxs)("div",{className:"range",children:[Object(u.jsx)("div",{}),c.map((function(e,t){return Object(u.jsx)("div",{className:d.range===e?"hovered":"",children:e},t)}))]}),Object(u.jsx)("div",{className:"table",onMouseLeave:b,children:n.map((function(e,t){return Object(u.jsx)("div",{className:"row",children:c.map((function(t,n){return Object(u.jsx)("div",{onMouseEnter:function(){return O(e,t)},onClick:function(){return f(e,t)},title:"(".concat(e,", ").concat(t,")"),children:Object(u.jsx)("span",{children:h(e,t)?"1":"0"})},n)}))},t)}))})]});return Object(u.jsxs)("div",{className:"matrix",children:[Object(u.jsxs)("header",{children:["M",Object(u.jsx)("span",{children:t})]}),n.length>0&&c.length>0?v:Object(u.jsx)("div",{className:"empty",children:"N/A"})]})}),N=(n(20),2*Math.PI),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?Math.max(t,Math.min(e-t,Math.floor(Math.random()*e))):Math.floor(Math.random()*e)},M=function(e){var t=e.relation,n=Object(a.useRef)(null),c=f().state,r=Object(a.useMemo)((function(){return c.collections.find((function(e){return e.name===t.source}))}),[c.collections,t.source]),o=Object(a.useMemo)((function(){return c.collections.find((function(e){return e.name===t.target}))}),[c.collections,t.target]);return Object(a.useEffect)((function(){var e=n.current.getContext("2d");e.textAlign="center",e.textBaseline="middle",e.font="14px sans-serif"}),[]),Object(a.useEffect)((function(){var e=n.current,a=e.height,c=e.width,s=e.getContext("2d");if(s.fillStyle="#f5f5f5",s.fillRect(0,0,c,a),s.fillStyle="#000",t.source===t.target)t.nodes.forEach((function(e,t){var n=Object(i.a)(e,1)[0],r=y(c,9),o=y(a,9);s.beginPath(),s.arc(r,o,8,0,N),s.closePath(),s.stroke(),s.beginPath(),s.fillText(n,r,o,16)}));else{var l=c/4,u=.2*l,j=a/2,d=a/r.elements.length,m=a/o.elements.length;s.beginPath(),s.ellipse(l,j,l/2,.9*j,0,0,N),s.stroke(),s.beginPath(),s.ellipse(3*l,j,l/2,.9*j,0,0,N),s.stroke(),r.elements.forEach((function(e,t){s.fillText(e,l,d*t+d/2,l)})),o.elements.forEach((function(e,t){s.fillText(e,3*l,m*t+m/2,l)})),t.nodes.forEach((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1],c=r.elements.findIndex((function(e){return e===n})),j=o.elements.findIndex((function(e){return e===a}));!function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,r=-(c=180-c)*Math.PI/180,o=c*Math.PI/180,i=n[0]-t[0],s=n[1]-t[1];e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(n[0],n[1]),e.stroke();var l=Math.atan2(s,i),u=n[0]+a*Math.cos(l+r),j=n[1]+a*Math.sin(l+r),d=n[0]+a*Math.cos(l+o),m=n[1]+a*Math.sin(l+o);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(u,j),e.stroke(),e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(d,m),e.stroke()}(s,[l+u,d*c+d/2],[3*l-u,m*j+m/2],6)}))}}),[t,c,r,o]),Object(u.jsx)("div",{className:"diagram",children:Object(u.jsx)("canvas",{ref:n})})},T=(n(21),function(e){var t=e.changed,n=f().state,c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],s=r[1],l=Object(a.useState)(""),j=Object(i.a)(l,2),d=j[0],m=j[1],O=Object(a.useMemo)((function(){return n.collections.map((function(e){return e.name})).sort((function(e,t){return t===d?0:-1}))}),[n,d]);Object(a.useEffect)((function(){window.addEventListener("click",(function(){o&&s(!1)}))}),[o,s]);var b=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),h=Object(a.useCallback)((function(){s(!o)}),[o,s]),v=Object(a.useCallback)((function(e){m(e),t&&t(e),s(!o)}),[o,s,m,t]);return Object(u.jsxs)("div",{className:"box select-relation ".concat(o?"open":""),onClick:b,children:[Object(u.jsx)("header",{onClick:h,children:Object(u.jsx)("div",{className:"item",children:d||"#"})}),Object(u.jsx)("main",{children:O.map((function(e,t){return Object(u.jsx)("div",{className:"item",onClick:function(){return v(e)},children:e},t)}))})]})}),L=(n(22),function(e){var t=e.relation,n=f(),c=n.state,r=n.dispatch,o=Object(a.useState)(""),s=Object(i.a)(o,2),l=s[0],j=s[1],d=Object(a.useState)(""),m=Object(i.a)(d,2),O=m[0],b=m[1],h=Object(a.useMemo)((function(){var e;return null===(e=c.collections.find((function(e){return e.name===t.source})))||void 0===e?void 0:e.elements}),[c,t.source]),v=Object(a.useMemo)((function(){var e;return null===(e=c.collections.find((function(e){return e.name===t.target})))||void 0===e?void 0:e.elements}),[c,t.target]),x=Object(a.useMemo)((function(){return h&&v&&t.nodes.length===h.length*v.length}),[t.nodes.length,h,v]);Object(a.useEffect)((function(){t.source&&j(t.source),t.target&&b(t.target)}),[t.source,t.target,j,b]);var p=Object(a.useCallback)((function(e){j(e),r({type:"UPDATE_RELATION_SOURCE",payload:{name:t.name,source:e}})}),[j,r,t.name]),g=Object(a.useCallback)((function(e){b(e),r({type:"UPDATE_RELATION_TARGET",payload:{name:t.name,target:e}})}),[b,r,t.name]),N=Object(a.useCallback)((function(e,n){r({type:"TOGGLE_RELATION_NODE",payload:{name:t.name,node:[e,n]}})}),[r,t.name]);return Object(u.jsxs)("div",{className:"box column relation",children:[Object(u.jsxs)("header",{className:"flex-align",children:[Object(u.jsxs)("div",{className:"flex-align relation-details",children:[Object(u.jsx)("input",{type:"text",maxLength:1,defaultValue:t.name}),"=",Object(u.jsx)(T,{changed:function(e){return p(e)}}),"->",Object(u.jsx)(T,{changed:function(e){return g(e)}})]}),Object(u.jsx)("div",{className:"flex-align attributes",children:Object(u.jsx)(C,{icon:"grid",text:"Filled",className:x?"on":"off"})})]}),(!l||!O)&&Object(u.jsx)("main",{className:"not-ready",children:"Select source and target sets!"}),l&&O&&Object(u.jsxs)("main",{children:[Object(u.jsx)(E,{name:t.name,relation:t,domain:h,range:v,changed:N}),Object(u.jsx)(M,{relation:t})]})]})}),k=(n(23),function(){var e=f(),t=e.state,n=e.dispatch,c=Object(a.useCallback)((function(){n({type:"ADD_RELATION"})}),[n]);return Object(u.jsxs)("div",{className:"relations",children:[Object(u.jsx)("main",{children:t.relations.map((function(e,t){return Object(u.jsx)(L,{relation:e},t)}))}),Object(u.jsx)("footer",{children:Object(u.jsx)("button",{className:"add",onClick:c,children:"Add Relation"})})]})});var A=function(){return Object(u.jsx)(h,{children:Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(x,{}),Object(u.jsx)(k,{}),Object(u.jsxs)("footer",{children:["With",Object(u.jsx)("span",{className:"love",children:Object(u.jsx)(g,{name:"heart"})}),"By",Object(u.jsx)("strong",{children:Object(u.jsx)("a",{href:"https://rahmaniali.ir",target:"_blank",rel:"noreferrer",children:"Ali Rahmani"})}),Object(u.jsx)("a",{href:"https://github.com/rahmaniali-ir/math-sets",children:Object(u.jsx)("img",{src:"https://img.shields.io/github/stars/rahmaniali-ir/math-sets?style=social",alt:"Github repo"})})]})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root")),_()}],[[24,1,2]]]);
//# sourceMappingURL=main.08bb8a5a.chunk.js.map