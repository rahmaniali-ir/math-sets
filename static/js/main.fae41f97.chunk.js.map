{"version":3,"sources":["providers/global.tsx","components/collectionSet/CollectionSet.tsx","components/collections/Collections.tsx","components/icon/iconPack.ts","components/icon/Icon.tsx","components/chips/Chips.tsx","components/matrix/Matrix.tsx","components/diagram/Diagram.tsx","components/selectRelation/SelectRelation.tsx","components/relation/Relation.tsx","components/relations/Relations.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["global","collections","elements","name","relations","source","target","nodes","getCollectionIndex","state","findIndex","collection","getRelationIndex","relation","reducer","action","type","charSet","usedChars","map","length","char","Math","floor","random","includes","generateUniqueCollectionLetter","newCollection","collectionIndex","payload","newElements","input","split","e","trim","filter","allElements","duplicatesFiltered","Array","from","Set","newCollections","index","toUpperCase","some","collectionLetterExists","_","element","rel","node","generateUniqueRelationLetter","relIndex","newRelations","coll","d","r","exists","globalContext","createContext","dispatch","useGlobal","useContext","GlobalProvider","children","useReducer","Provider","value","CollectionSet","inputRef","useRef","useEffect","current","onNameChange","useCallback","key","onAdd","onRemoveCollection","onRemoveElement","className","maxLength","defaultValue","onKeyUp","ref","onClick","Collections","addCollection","pack","symmetry","grid","plus","Icon","icon","useMemo","__html","dangerouslySetInnerHTML","Chips","text","title","Matrix","domain","range","changed","useState","hovered","setHovered","onMouseHover","onMouseLeave","onToggle","h","getRelation","rd","rr","main","di","ri","onMouseEnter","PI2","PI","getRandom","offset","max","min","Diagram","canvasRef","find","ctx","getContext","textAlign","textBaseline","font","canvas","height","width","fillStyle","fillRect","forEach","i","x","radius","y","beginPath","arc","closePath","stroke","fillText","column","columnPadding","verticalCenter","sourceFloor","targetFloor","ellipse","to","headLength","theta","leftDeg","rightDeg","dx","dy","moveTo","lineTo","angle","atan2","h1x","cos","h1y","sin","h2x","h2y","pointTo","SelectRelation","open","setOpen","selected","setSelected","sort","a","b","window","addEventListener","onClickInside","stopPropagation","toggleOpen","onSelect","Relation","setSource","setTarget","domainSet","rangeSet","isFilled","onSourceChange","onTargetChange","onMatrixToggle","Relations","addRelation","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fae41f97.chunk.js","sourcesContent":["import { createContext, useContext, useReducer } from \"react\"\r\nimport { Collection } from \"../interfaces/collection\"\r\nimport { OrderedPair } from \"../interfaces/relation\"\r\nimport { GlobalAction, GlobalReducer, GlobalState } from \"./global.types\"\r\n\r\n// state\r\nconst global: GlobalState = {\r\n  collections: [\r\n    {\r\n      elements: [\"a\", \"b\", \"c\"],\r\n      name: \"A\",\r\n    },\r\n    {\r\n      elements: [\"1\", \"2\", \"3\", \"4\"],\r\n      name: \"B\",\r\n    },\r\n  ],\r\n  relations: [\r\n    {\r\n      name: \"R\",\r\n      source: \"A\",\r\n      target: \"B\",\r\n      nodes: [],\r\n    },\r\n  ],\r\n}\r\n\r\nconst generateUniqueCollectionLetter = (state: GlobalState) => {\r\n  const charSet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\r\n  const usedChars = state.collections.map(collection => collection.name)\r\n\r\n  if (usedChars.length === charSet.length) return \"\"\r\n\r\n  do {\r\n    const char = charSet[Math.floor(Math.random() * charSet.length)]\r\n    if (!usedChars.includes(char)) return char\r\n  } while (true)\r\n}\r\n\r\nconst generateUniqueRelationLetter = (state: GlobalState) => {\r\n  const charSet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\r\n  const usedChars = state.relations.map(relation => relation.name)\r\n\r\n  if (usedChars.length === charSet.length) return \"\"\r\n\r\n  do {\r\n    const char = charSet[Math.floor(Math.random() * charSet.length)]\r\n    if (!usedChars.includes(char)) return char\r\n  } while (true)\r\n}\r\n\r\nconst collectionLetterExists = (state: GlobalState, name: string) => {\r\n  return state.collections.some(collection => collection.name === name)\r\n}\r\n\r\nconst getCollectionIndex = (state: GlobalState, name: string) => {\r\n  return state.collections.findIndex(collection => collection.name === name)\r\n}\r\n\r\nconst getRelationIndex = (state: GlobalState, name: string) => {\r\n  return state.relations.findIndex(relation => relation.name === name)\r\n}\r\n\r\n// reducer\r\nconst reducer = (state: GlobalState, action: GlobalAction): GlobalState => {\r\n  switch (action.type) {\r\n    case \"ADD_COLLECTION\": {\r\n      const name = generateUniqueCollectionLetter(state)\r\n      if (!name) return state\r\n\r\n      const newCollection: Collection = { name, elements: [] }\r\n\r\n      return { ...state, collections: [...state.collections, newCollection] }\r\n    }\r\n\r\n    case \"ADD_TO_COLLECTION\": {\r\n      const collectionIndex = getCollectionIndex(\r\n        state,\r\n        action.payload.collection\r\n      )\r\n\r\n      const newElements = action.payload.input\r\n        .split(\",\")\r\n        .map((e: string) => e.trim())\r\n        .filter((e: string) => e)\r\n\r\n      const allElements = [\r\n        ...state.collections[collectionIndex].elements,\r\n        ...newElements,\r\n      ]\r\n      const duplicatesFiltered = Array.from(new Set(allElements))\r\n\r\n      const newCollections: Collection[] = state.collections.map(\r\n        (collection, index) => {\r\n          if (index === collectionIndex) {\r\n            collection.elements = duplicatesFiltered\r\n          }\r\n          return collection\r\n        }\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        collections: newCollections,\r\n      }\r\n    }\r\n\r\n    case \"RENAME_COLLECTION\": {\r\n      const name: string = action.payload.name.toUpperCase()\r\n\r\n      if (collectionLetterExists(state, name)) return state\r\n\r\n      const collectionIndex = getCollectionIndex(state, action.payload.name)\r\n\r\n      const newCollections: Collection[] = state.collections.map(\r\n        (collection, index) =>\r\n          index === collectionIndex\r\n            ? { name, elements: collection.elements }\r\n            : collection\r\n      )\r\n\r\n      return { ...state, collections: newCollections }\r\n    }\r\n\r\n    case \"REMOVE_COLLECTION\": {\r\n      const collectionIndex = getCollectionIndex(state, action.payload.name)\r\n\r\n      return {\r\n        ...state,\r\n        collections: state.collections.filter(\r\n          (_, index) => index !== collectionIndex\r\n        ),\r\n      }\r\n    }\r\n\r\n    case \"REMOVE_FROM_COLLECTION\": {\r\n      const collectionIndex = getCollectionIndex(state, action.payload.name)\r\n\r\n      const newCollections = state.collections.map((collection, index) => {\r\n        return index === collectionIndex\r\n          ? {\r\n              ...collection,\r\n              elements: collection.elements.filter(\r\n                element => element !== action.payload.element\r\n              ),\r\n            }\r\n          : collection\r\n      })\r\n\r\n      const relations = state.relations.map(rel => {\r\n        if (rel.source === action.payload.name)\r\n          rel.nodes = rel.nodes.filter(\r\n            node => node[0] !== action.payload.element\r\n          )\r\n\r\n        if (rel.target === action.payload.name)\r\n          rel.nodes = rel.nodes.filter(\r\n            node => node[1] !== action.payload.element\r\n          )\r\n\r\n        return rel\r\n      })\r\n\r\n      return {\r\n        ...state,\r\n        collections: newCollections,\r\n        relations: relations,\r\n      }\r\n    }\r\n\r\n    case \"ADD_RELATION\": {\r\n      const name = generateUniqueRelationLetter(state)\r\n\r\n      return {\r\n        ...state,\r\n        relations: [\r\n          ...state.relations,\r\n          { name, source: \"\", target: \"\", nodes: [] },\r\n        ],\r\n      }\r\n    }\r\n\r\n    case \"UPDATE_RELATION_SOURCE\": {\r\n      const relIndex = getRelationIndex(state, action.payload.name)\r\n\r\n      if (state.relations[relIndex].source === action.payload.source)\r\n        return state\r\n\r\n      const newRelations = state.relations.map((coll, index) => {\r\n        return index === relIndex\r\n          ? { ...coll, source: action.payload.source, nodes: [] }\r\n          : coll\r\n      })\r\n\r\n      return { ...state, relations: newRelations }\r\n    }\r\n\r\n    case \"UPDATE_RELATION_TARGET\": {\r\n      const relIndex = getRelationIndex(state, action.payload.name)\r\n\r\n      if (state.relations[relIndex].target === action.payload.target)\r\n        return state\r\n\r\n      const newRelations = state.relations.map((coll, index) => {\r\n        return index === relIndex\r\n          ? { ...coll, target: action.payload.target, nodes: [] }\r\n          : coll\r\n      })\r\n\r\n      return { ...state, relations: newRelations }\r\n    }\r\n\r\n    case \"TOGGLE_RELATION_NODE\": {\r\n      const relIndex = getRelationIndex(state, action.payload.name)\r\n      const rel = state.relations[relIndex]\r\n      const [d, r]: OrderedPair<string> = action.payload.node\r\n\r\n      const exists = rel.nodes.some(node => node[0] === d && node[1] === r)\r\n\r\n      if (exists) {\r\n        rel.nodes = rel.nodes.filter(node => !(node[0] === d && node[1] === r))\r\n      } else {\r\n        rel.nodes = [...rel.nodes, [d, r]]\r\n      }\r\n\r\n      return { ...state }\r\n    }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// context\r\nconst globalContext = createContext<GlobalReducer>({\r\n  state: global,\r\n  dispatch: () => {},\r\n})\r\n\r\n// context hook\r\nexport const useGlobal = () => useContext(globalContext)\r\n\r\n// provider\r\nexport const GlobalProvider = ({ children }: any) => {\r\n  const [state, dispatch] = useReducer(reducer, global)\r\n\r\n  return (\r\n    <globalContext.Provider value={{ state, dispatch }}>\r\n      {children}\r\n    </globalContext.Provider>\r\n  )\r\n}\r\n","import { useCallback, useEffect, useRef } from \"react\"\r\nimport { Collection } from \"../../interfaces/collection\"\r\nimport { useGlobal } from \"../../providers/global\"\r\nimport \"./collectionSet.sass\"\r\n\r\ntype Props = {\r\n  collection: Collection\r\n}\r\n\r\nconst CollectionSet = ({ collection }: Props) => {\r\n  const { dispatch } = useGlobal()\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // update name if updated\r\n  useEffect(() => {\r\n    inputRef.current!.value = collection.name\r\n  }, [collection.name])\r\n\r\n  // update input on textbox value change\r\n  const onNameChange = useCallback(\r\n    e => {\r\n      if (e.key === \"Enter\") {\r\n        dispatch({\r\n          type: \"RENAME_COLLECTION\",\r\n          payload: { collection: collection.name, name: e.target.value },\r\n        })\r\n      }\r\n    },\r\n    [dispatch, collection.name]\r\n  )\r\n\r\n  // update input on textbox value change\r\n  const onAdd = useCallback(\r\n    e => {\r\n      if (e.key === \"Enter\") {\r\n        dispatch({\r\n          type: \"ADD_TO_COLLECTION\",\r\n          payload: { collection: collection.name, input: e.target.value },\r\n        })\r\n\r\n        e.target.value = \"\"\r\n      }\r\n    },\r\n    [dispatch, collection.name]\r\n  )\r\n\r\n  // update input on textbox value change\r\n  const onRemoveCollection = useCallback(() => {\r\n    dispatch({\r\n      type: \"REMOVE_COLLECTION\",\r\n      payload: { name: collection.name },\r\n    })\r\n  }, [dispatch, collection.name])\r\n\r\n  // update input on textbox value change\r\n  const onRemoveElement = useCallback(\r\n    (element: string) => {\r\n      dispatch({\r\n        type: \"REMOVE_FROM_COLLECTION\",\r\n        payload: { name: collection.name, element },\r\n      })\r\n    },\r\n    [dispatch, collection.name]\r\n  )\r\n\r\n  return (\r\n    <div className='box set'>\r\n      <header>\r\n        <input\r\n          type='text'\r\n          maxLength={1}\r\n          defaultValue={collection.name}\r\n          onKeyUp={onNameChange}\r\n          ref={inputRef}\r\n        />\r\n      </header>\r\n\r\n      <main>\r\n        {collection.elements.map((element, key) => (\r\n          <div\r\n            className='element'\r\n            key={key}\r\n            onClick={() => onRemoveElement(element)}\r\n          >\r\n            <span>{element}</span>\r\n          </div>\r\n        ))}\r\n      </main>\r\n\r\n      <div className='add'>\r\n        <input type='text' onKeyUp={onAdd} />\r\n      </div>\r\n\r\n      <div className='delete'>\r\n        <button onClick={onRemoveCollection}>Del</button>\r\n      </div>\r\n\r\n      <footer>{collection.elements.length}</footer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CollectionSet\r\n","import { useCallback } from \"react\"\r\nimport { useGlobal } from \"../../providers/global\"\r\nimport CollectionSet from \"../collectionSet/CollectionSet\"\r\nimport \"./collections.sass\"\r\n\r\nconst Collections = () => {\r\n  const { state, dispatch } = useGlobal()\r\n\r\n  const addCollection = useCallback(() => {\r\n    dispatch({ type: \"ADD_COLLECTION\" })\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <div className='collections'>\r\n      {state.collections.map((collection, key) => (\r\n        <CollectionSet key={key} collection={collection} />\r\n      ))}\r\n\r\n      <button className='add' onClick={addCollection}>\r\n        Add Set\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Collections\r\n","export type IconName = \"symmetry\" | \"grid\" | \"plus\"\r\n\r\ntype IconPack = { [name in IconName]: string }\r\n\r\nexport const pack: IconPack = {\r\n  symmetry: `<svg viewBox=\"0 0 384 384\"><path d=\"M234.667 0H192c0 106.027-85.973 192-192 192v42.667C129.6 234.667 234.667 129.6 234.667 0z\"/><path d=\"M149.333 0h-42.667C106.667 58.88 58.88 106.667 0 106.667v42.667C82.453 149.333 149.333 82.453 149.333 0zM64 0H0v64c35.307 0 64-28.693 64-64zM234.667 384h42.667c0-58.88 47.787-106.667 106.667-106.667v-42.667c-82.454.001-149.334 66.881-149.334 149.334z\"/><path d=\"M149.333 384H192c0-106.027 85.973-192 192-192v-42.667C254.4 149.333 149.333 254.4 149.333 384zM320 384h64v-64c-35.307 0-64 28.693-64 64z\"/></svg>`,\r\n  grid: `<svg viewBox=\"0 0 408 408\"><path d=\"M0 102h102V0H0v102zm153 306h102V306H153v102zM0 408h102V306H0v102zm0-153h102V153H0v102zm153 0h102V153H153v102zM306 0v102h102V0H306zM153 102h102V0H153v102zm153 153h102V153H306v102zm0 153h102V306H306v102z\"/></svg>`,\r\n  plus: `<svg viewBox=\"0 0 357 357\"><path d=\"M357 204H204v153h-51V204H0v-51h153V0h51v153h153v51z\"/></svg>`,\r\n}\r\n","import { useMemo } from \"react\"\r\nimport \"./icon.sass\"\r\n\r\nimport { pack, IconName } from \"./iconPack\"\r\n\r\ntype Props = {\r\n  name: IconName\r\n}\r\n\r\nconst Icon = ({ name }: Props) => {\r\n  const icon = useMemo(() => ({ __html: pack[name] }), [name])\r\n\r\n  return <div className='icon' dangerouslySetInnerHTML={icon}></div>\r\n}\r\n\r\nexport default Icon\r\n","import Icon from \"../icon/Icon\"\r\nimport \"./chips.sass\"\r\n\r\nimport { IconName } from \"../icon/iconPack\"\r\n\r\ntype Props = {\r\n  icon: IconName\r\n  text?: string\r\n  className?: string\r\n}\r\n\r\nconst Chips = ({ icon, text, className }: Props) => {\r\n  return (\r\n    <div className={`chips ${className}`} title={text}>\r\n      <Icon name={icon} />\r\n      {text && <main>{text}</main>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chips\r\n","import { useState, useCallback } from \"react\"\r\nimport \"./matrix.sass\"\r\n\r\nimport type { Relation } from \"../../interfaces/relation\"\r\n\r\ntype Props<T = any> = {\r\n  name: string\r\n  domain: T[]\r\n  range: T[]\r\n  relation: Relation\r\n  changed?: Function\r\n}\r\n\r\nconst Matrix = ({ name, domain, range, relation, changed }: Props<string>) => {\r\n  const [hovered, setHovered] = useState({ domain: null, range: null })\r\n\r\n  const onMouseHover = useCallback(\r\n    (d, r) => {\r\n      setHovered({ domain: d, range: r })\r\n    },\r\n    [setHovered]\r\n  )\r\n\r\n  const onMouseLeave = useCallback(() => {\r\n    setHovered({ domain: null, range: null })\r\n  }, [setHovered])\r\n\r\n  const onToggle = useCallback(\r\n    (d, r) => {\r\n      if (changed) {\r\n        changed(d, r)\r\n\r\n        // force to rerender\r\n        setHovered(h => ({ ...h }))\r\n      }\r\n    },\r\n    [changed, setHovered]\r\n  )\r\n\r\n  const getRelation = useCallback(\r\n    (d, r) => {\r\n      return relation.nodes.some(([rd, rr]) => {\r\n        return d === rd && r === rr\r\n      })\r\n    },\r\n    [relation]\r\n  )\r\n\r\n  // the main section\r\n  const main = (\r\n    <main>\r\n      <div className='domain'>\r\n        <div></div>\r\n        {domain.map((d, di) => (\r\n          <div key={di} className={hovered.domain === d ? \"hovered\" : \"\"}>\r\n            {d}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className='range'>\r\n        <div></div>\r\n        {range.map((r, ri) => (\r\n          <div key={ri} className={hovered.range === r ? \"hovered\" : \"\"}>\r\n            {r}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className='table' onMouseLeave={onMouseLeave}>\r\n        {domain.map((d, di) => (\r\n          <div className='row' key={di}>\r\n            {range.map((r, ri) => (\r\n              <div\r\n                key={ri}\r\n                onMouseEnter={() => onMouseHover(d, r)}\r\n                onClick={() => onToggle(d, r)}\r\n                title={`(${d}, ${r})`}\r\n              >\r\n                <span>{getRelation(d, r) ? \"1\" : \"0\"}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </main>\r\n  )\r\n\r\n  return (\r\n    <div className='matrix'>\r\n      <header>\r\n        M<span>{name}</span>\r\n      </header>\r\n\r\n      {domain.length > 0 && range.length > 0 ? (\r\n        main\r\n      ) : (\r\n        <div className='empty'>N/A</div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Matrix\r\n","import { useEffect, useMemo, useRef } from \"react\"\r\nimport { OrderedPair, Relation } from \"../../interfaces/relation\"\r\nimport { useGlobal } from \"../../providers/global\"\r\nimport \"./diagram.sass\"\r\n\r\nconst PI2 = Math.PI * 2\r\n\r\ninterface Props {\r\n  relation: Relation\r\n}\r\n\r\nconst getRandom = (range: number, offset: number = 0) => {\r\n  if (offset > 0)\r\n    return Math.max(\r\n      offset,\r\n      Math.min(range - offset, Math.floor(Math.random() * range))\r\n    )\r\n\r\n  return Math.floor(Math.random() * range)\r\n}\r\n\r\nconst pointTo = (\r\n  ctx: CanvasRenderingContext2D,\r\n  from: OrderedPair<number>,\r\n  to: OrderedPair<number>,\r\n  headLength: number = 8,\r\n  theta: number = 30\r\n) => {\r\n  theta = 180 - theta\r\n\r\n  const leftDeg = (-theta * Math.PI) / 180\r\n  const rightDeg = (theta * Math.PI) / 180\r\n\r\n  const dx = to[0] - from[0]\r\n  const dy = to[1] - from[1]\r\n\r\n  ctx.beginPath()\r\n  ctx.moveTo(from[0], from[1])\r\n  ctx.lineTo(to[0], to[1])\r\n  ctx.stroke()\r\n\r\n  const angle = Math.atan2(dy, dx)\r\n  const h1x = to[0] + headLength * Math.cos(angle + leftDeg)\r\n  const h1y = to[1] + headLength * Math.sin(angle + leftDeg)\r\n  const h2x = to[0] + headLength * Math.cos(angle + rightDeg)\r\n  const h2y = to[1] + headLength * Math.sin(angle + rightDeg)\r\n\r\n  ctx.beginPath()\r\n  ctx.moveTo(to[0], to[1])\r\n  ctx.lineTo(h1x, h1y)\r\n  ctx.stroke()\r\n\r\n  ctx.beginPath()\r\n  ctx.moveTo(to[0], to[1])\r\n  ctx.lineTo(h2x, h2y)\r\n  ctx.stroke()\r\n}\r\n\r\nconst Diagram = ({ relation }: Props) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null)\r\n  const { state } = useGlobal()\r\n\r\n  const domain = useMemo(() => {\r\n    return state.collections.find(coll => coll.name === relation.source)\r\n  }, [state.collections, relation.source])\r\n\r\n  const range = useMemo(() => {\r\n    return state.collections.find(coll => coll.name === relation.target)\r\n  }, [state.collections, relation.target])\r\n\r\n  useEffect(() => {\r\n    const ctx = canvasRef.current!.getContext(\"2d\")!\r\n    ctx.textAlign = \"center\"\r\n    ctx.textBaseline = \"middle\"\r\n    ctx.font = \"14px sans-serif\"\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current!\r\n    const height = canvas.height\r\n    const width = canvas.width\r\n    const ctx = canvas.getContext(\"2d\")!\r\n    const radius = 8\r\n\r\n    // ctx.clearRect(0, 0, width, height)\r\n    ctx.fillStyle = \"#f5f5f5\"\r\n    ctx.fillRect(0, 0, width, height)\r\n    ctx.fillStyle = \"#000\"\r\n\r\n    if (relation.source === relation.target) {\r\n      relation.nodes.forEach((node, i) => {\r\n        const [d] = node\r\n\r\n        const x = getRandom(width, radius + 1)\r\n        const y = getRandom(height, radius + 1)\r\n\r\n        ctx.beginPath()\r\n        ctx.arc(x, y, radius, 0, PI2)\r\n        ctx.closePath()\r\n        ctx.stroke()\r\n\r\n        ctx.beginPath()\r\n        ctx.fillText(d, x, y, radius * 2)\r\n      })\r\n    } else {\r\n      const column = width / 4\r\n      const columnPadding = column * 0.2\r\n      const verticalCenter = height / 2\r\n      const sourceFloor = height / domain!.elements.length\r\n      const targetFloor = height / range!.elements.length\r\n\r\n      // ellipse 1\r\n      ctx.beginPath()\r\n      ctx.ellipse(\r\n        column,\r\n        verticalCenter,\r\n        column / 2,\r\n        verticalCenter * 0.9,\r\n        0,\r\n        0,\r\n        PI2\r\n      )\r\n      ctx.stroke()\r\n\r\n      // ellipse 2\r\n      ctx.beginPath()\r\n      ctx.ellipse(\r\n        column * 3,\r\n        verticalCenter,\r\n        column / 2,\r\n        verticalCenter * 0.9,\r\n        0,\r\n        0,\r\n        PI2\r\n      )\r\n      ctx.stroke()\r\n\r\n      // source set\r\n      domain!.elements.forEach((element, i) => {\r\n        ctx.fillText(element, column, sourceFloor * i + sourceFloor / 2, column)\r\n      })\r\n\r\n      // target set\r\n      range!.elements.forEach((element, i) => {\r\n        ctx.fillText(\r\n          element,\r\n          column * 3,\r\n          targetFloor * i + targetFloor / 2,\r\n          column\r\n        )\r\n      })\r\n\r\n      relation.nodes.forEach(node => {\r\n        const [d, r] = node\r\n        const di = domain!.elements.findIndex(e => e === d)\r\n        const ri = range!.elements.findIndex(e => e === r)\r\n\r\n        pointTo(\r\n          ctx,\r\n          [column + columnPadding, sourceFloor * di + sourceFloor / 2],\r\n          [column * 3 - columnPadding, targetFloor * ri + targetFloor / 2],\r\n          6\r\n        )\r\n      })\r\n    }\r\n  }, [relation, state, domain, range])\r\n\r\n  return (\r\n    <div className='diagram'>\r\n      <canvas ref={canvasRef}></canvas>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Diagram\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\"\r\nimport { useGlobal } from \"../../providers/global\"\r\nimport \"./selectRelation.sass\"\r\n\r\ninterface Props {\r\n  changed?: (collection: string) => any\r\n}\r\n\r\nconst SelectRelation = ({ changed }: Props) => {\r\n  const { state } = useGlobal()\r\n  const [open, setOpen] = useState(false)\r\n  const [selected, setSelected] = useState(\"\")\r\n\r\n  const collections = useMemo(\r\n    () =>\r\n      state.collections\r\n        .map(collection => collection.name)\r\n        .sort((a, b) => (b === selected ? 0 : -1)),\r\n    [state, selected]\r\n  )\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"click\", () => {\r\n      if (open) setOpen(false)\r\n    })\r\n  }, [open, setOpen])\r\n\r\n  const onClickInside = useCallback(e => {\r\n    e.stopPropagation()\r\n  }, [])\r\n\r\n  const toggleOpen = useCallback(() => {\r\n    setOpen(!open)\r\n  }, [open, setOpen])\r\n\r\n  const onSelect = useCallback(\r\n    (collection: string) => {\r\n      setSelected(collection)\r\n      if (changed) changed(collection)\r\n\r\n      setOpen(!open)\r\n    },\r\n    [open, setOpen, setSelected, changed]\r\n  )\r\n\r\n  return (\r\n    <div\r\n      className={`box select-relation ${open ? \"open\" : \"\"}`}\r\n      onClick={onClickInside}\r\n    >\r\n      <header onClick={toggleOpen}>\r\n        <div className='item'>{selected ? selected : \"#\"}</div>\r\n      </header>\r\n\r\n      <main>\r\n        {collections.map((collection, key) => (\r\n          <div className='item' key={key} onClick={() => onSelect(collection)}>\r\n            {collection}\r\n          </div>\r\n        ))}\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SelectRelation\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\"\r\nimport { Relation as Rel } from \"../../interfaces/relation\"\r\nimport { useGlobal } from \"../../providers/global\"\r\nimport Chips from \"../chips/Chips\"\r\nimport Matrix from \"../matrix/Matrix\"\r\nimport Diagram from \"../diagram/Diagram\"\r\nimport SelectRelation from \"../selectRelation/SelectRelation\"\r\nimport \"./relation.sass\"\r\n\r\ninterface Props {\r\n  relation: Rel\r\n}\r\n\r\nconst Relation = ({ relation }: Props) => {\r\n  const { state, dispatch } = useGlobal()\r\n  const [source, setSource] = useState(\"\")\r\n  const [target, setTarget] = useState(\"\")\r\n\r\n  // domain\r\n  const domainSet = useMemo(() => {\r\n    return state.collections.find(\r\n      collection => collection.name === relation.source\r\n    )?.elements\r\n  }, [state, relation.source])\r\n\r\n  // range\r\n  const rangeSet = useMemo(() => {\r\n    return state.collections.find(\r\n      collection => collection.name === relation.target\r\n    )?.elements\r\n  }, [state, relation.target])\r\n\r\n  const isFilled = useMemo(() => {\r\n    return (\r\n      domainSet &&\r\n      rangeSet &&\r\n      relation.nodes.length === domainSet.length * rangeSet.length\r\n    )\r\n  }, [relation.nodes.length, domainSet, rangeSet])\r\n\r\n  useEffect(() => {\r\n    if (relation.source) setSource(relation.source)\r\n    if (relation.target) setTarget(relation.target)\r\n  }, [relation.source, relation.target, setSource, setTarget])\r\n\r\n  const onSourceChange = useCallback(\r\n    (collection: string) => {\r\n      setSource(collection)\r\n\r\n      dispatch({\r\n        type: \"UPDATE_RELATION_SOURCE\",\r\n        payload: { name: relation.name, source: collection },\r\n      })\r\n    },\r\n    [setSource, dispatch, relation.name]\r\n  )\r\n\r\n  const onTargetChange = useCallback(\r\n    (collection: string) => {\r\n      setTarget(collection)\r\n\r\n      dispatch({\r\n        type: \"UPDATE_RELATION_TARGET\",\r\n        payload: { name: relation.name, target: collection },\r\n      })\r\n    },\r\n    [setTarget, dispatch, relation.name]\r\n  )\r\n\r\n  const onMatrixToggle = useCallback(\r\n    (d: string, r: string) => {\r\n      dispatch({\r\n        type: \"TOGGLE_RELATION_NODE\",\r\n        payload: { name: relation.name, node: [d, r] },\r\n      })\r\n    },\r\n    [dispatch, relation.name]\r\n  )\r\n\r\n  return (\r\n    <div className='box column relation'>\r\n      <header className='flex-align'>\r\n        <div className='flex-align relation-details'>\r\n          <input type='text' maxLength={1} defaultValue={relation.name} />\r\n          =\r\n          <SelectRelation changed={coll => onSourceChange(coll)} />\r\n          {\"->\"}\r\n          <SelectRelation changed={coll => onTargetChange(coll)} />\r\n        </div>\r\n\r\n        <div className='flex-align attributes'>\r\n          <Chips\r\n            icon='grid'\r\n            text='Filled'\r\n            className={isFilled ? \"on\" : \"off\"}\r\n          />\r\n        </div>\r\n      </header>\r\n\r\n      {(!source || !target) && (\r\n        <main className='not-ready'>Select source and target sets!</main>\r\n      )}\r\n\r\n      {source && target && (\r\n        <main>\r\n          <Matrix\r\n            name={relation.name}\r\n            relation={relation}\r\n            domain={domainSet!}\r\n            range={rangeSet!}\r\n            changed={onMatrixToggle}\r\n          />\r\n\r\n          <Diagram relation={relation} />\r\n        </main>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Relation\r\n","import { useCallback } from \"react\"\r\nimport { useGlobal } from \"../../providers/global\"\r\nimport Relation from \"../relation/Relation\"\r\nimport \"./relations.sass\"\r\n\r\nconst Relations = () => {\r\n  const { state, dispatch } = useGlobal()\r\n\r\n  const addRelation = useCallback(() => {\r\n    dispatch({ type: \"ADD_RELATION\" })\r\n  }, [dispatch])\r\n\r\n  return (\r\n    <div className='relations'>\r\n      <main>\r\n        {state.relations.map((relation, key) => (\r\n          <Relation relation={relation} key={key} />\r\n        ))}\r\n      </main>\r\n\r\n      <footer>\r\n        <button className='add' onClick={addRelation}>\r\n          Add Relation\r\n        </button>\r\n      </footer>\r\n\r\n      {/* <pre>{JSON.stringify(state, null, 2)}</pre> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Relations\r\n","import { GlobalProvider } from \"./providers/global\"\n\nimport Collections from \"./components/collections/Collections\"\nimport Relations from \"./components/relations/Relations\"\n\nfunction App() {\n  return (\n    <GlobalProvider>\n      <div className='app'>\n        <Collections />\n        <Relations />\n      </div>\n    </GlobalProvider>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.sass\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}